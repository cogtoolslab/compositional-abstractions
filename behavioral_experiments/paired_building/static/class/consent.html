<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <!-- <\!-- Bootstrap theme -\-> -->
    <link href="../css/bootstrap-theme.min.css" rel="stylesheet">
    </script>
  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">

      </br>

      <div id="show">
	
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="0" aria-valuemax="100" style="width: 1%;"><span class="sr-only">1% Complete</span></div>
      </div>

      <div style="text-align: center; margin-left: auto; margin-right: auto">

      </div>
      
      <div class="page-header" style="text-align: center">
        <h3>Welcome!</h3>
      </div>
      
      <div class="well" style="width: 500px; margin: 0 auto"> 

	<p align="left" id="instruct-text">In this exercise, you will play a communication game with another student. Before starting the game, you will be given further instructions and must pass a short quiz testing your understanding of the instructions.
	</p>

	<p> We expect the average game to last between 30-45 minutes, including the time it takes to read instructions and wait for another player. The actual duration of the game depends on the cooperation of both players, so we cannot provide precise estimates of exactly how long this game will take.</p>

  <p>We sincerely appreciate your time and effort, and your contributions to our research are highly valued! For further questions, please feel free to contact us at cogtoolslab.requester@gmail.com </p>  

	<p>Note: We recommend using Chrome. We have not tested this game in other browsers.</p>
      </div>

      <p>
        <center><button id="agree" type="button" style="display: none" class="btn btn-sm btn-primary">CONTINUE</button></center>
	<noscript><strong>JavaScript must be enabled to start.</strong></noscript>
      </p>
      <hr>
      
      <u><p id="legal">Consenting to Participate:</p></u>

      <p id="legal">By answering the following questions, you are
      participating in a study being performed by cognitive scientists
      in the University of California San Diego Department of Psychology. If you have questions
      about this research, please contact us  at 
      <b><a href="mailto://cogtoolslab.requester@gmail.com">cogtoolslab.requester@gmail.com</a></b>.
      You must be at least 18 years old to participate. Your participation in this research
      is voluntary. You may decline to answer any or all of the
      following questions. You may decline further participation, at
      any time, without adverse consequences. Your anonymity is
      assured; the researchers who have requested your participation
      will not receive any personal information about you.</p>

      </div> <!-- show -->

    </div> <!-- /container -->

    <script type="text/javascript">
      $(document).ready(function () {
        var urlParams;
        var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);
      
      //console.log(urlParams)
      if(urlParams.assignmentId != "ASSIGNMENT_ID_NOT_AVAILABLE") {
         $("#agree").show()
      } 

      document.getElementById("agree").onclick = function () {
        var workerId = 'cls' + [...Array(12)].map(i=>(~~(Math.random()*36)).toString(36)).join('');
        var assignmentId = urlParams.assignmentId;
        var hitId = urlParams.hitId;
        var turkSubmitTo = urlParams.turkSubmitTo;
        location.replace("./instructions.html?workerId=" + workerId
                         + "&assignmentId=" + assignmentId
                         + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
      };
      });

    </script>    

  </body>
</html>
