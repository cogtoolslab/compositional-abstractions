<!-- set size = 6  -->
<!-- to manually change to set size 4, change images to 4chairs.png (and adjust size to 400, 100), "six objects" to "four objects", and 48 trials to 40 -->
<!-- and second to last question in comprehension check  -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../favicon.ico">

    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>    
    <link href="../css/bootstrap.min.css" rel="stylesheet">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body role="document">

    <div class="container theme-showcase" role="main">

        </br>
        <!-- <div class="progress"> -->
        <!--     <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" -->
        <!--         style="width: 5%;"><span class="sr-only">5% Complete</span></div> -->
        <!-- </div> -->

        <div class="page-header">
            <h1>Instructions</h1>
        </div>

        <div class="well" style="width:800px; margin: 0 auto">

            <h2>
                <center>Building Game!</center>
            </h2>

            <p>

                In this experiment you will play a fun game with another player on MTurk!  You will be working together to build towers like the one below using a set of red and blue dominoes:
            </p>
            <p>
                <center><img src="./images/example_tower.png" alt="Example tower" style="width:400px;height:400px">
                </center>
            </p>
            <p>
                One of you will act as the <b>Architect</b> and the other will be the <b>Builder</b>. 
                On each trial, you will collaborate to recreate two towers, each composed of four dominoes.                
            </p>
            <p>            
            The <b>Architect</b> is able to see how the towers should look and where they should be located. 
            They are unable to place any dominoes in the building environment. So their goal is to provide step-by-step instructions using the chat window so the <b>Builder</b> knows what to do to recreate them exactly as they appear. Whenever it is their turn, the <b>Architect</b> can only send <b> one </b> set of instructions. Moreover, each set of instructions will be limited to 100 characters, so it is important for these instructions to be concise, as well as informative! 
            </p>
             <p>
                <figure>
                    <center><img src="images/architect_view.png" alt="architect_view" style="width:620px;height:300px">
                    <figcaption>Architect view at beginning of trial.</figcaption>
                </center>
                  </figure>
                  <br>
            </p>
            <p>  
            After receiving each set of instructions from the <b>Architect</b>, the <b>Builder</b> will try to follow them by placing dominoes in the environment. 
            The <b>Builder</b> is free to place more than one domino on each turn, but they should be confident they are accurately interpreting the <b>Architect's</b> instructions -- there is no way to "undo" an action or move a domino once it has been placed.  
            Once the <b>Builder</b> has placed the blocks they wish to place, they should click the "Done" button to end their turn. 
            If the <b>Builder</b> is uncertain, they can choose to end their turn without placing a domino. 
            The <b>Architect</b> will be able to see when the </b>Builder</b> places each domino, allowing them to adjust their instructions accordingly. 
              
            </p>
            <figure>
                <center><img src="images/builder_view.png" alt="builder_view" style="width:620px;height:330px">
                <figcaption>Builder view during trial.</figcaption>
            </center>
              </figure>
              <br>
            <p>  
            Each turn is limited to <b>30 seconds</b>. However, you and your partner are free to take as many turns as they need to finish each trial, as your main goal is to recreate the towers as <b>accurately</b> as possible.
            Once <b>eight blocks</b> have been placed, the trial will automatically end. 
            After each trial ends, the <b>Builder</b> will get to see what the towers actually looked like on that trial, and both players will receive a bonus of up to $0.20. 
            The more accurate the recreation, the larger the bonus both of you will receive. Remember that you can earn a partial bonus even if your recreation isn't perfect â€” so even if there is a mistake, it is still worth it to keep trying on each trial to maximize your bonus. 
            <p><b>HINT:</b> There are two red vertical tick marks below the floor on the left and right sides of the building environment. These appear in the same location for both players, so feel free to use these as stable landmarks when providing instructions or interpreting them! </p>
            <!-- <p>
                <center><img src="images/bonusmeter2.png" alt="bonus meter" style="width:440px;height:200px"></center>
            </p> -->

            <p> Each game consists of 12 trials, and it is expected to take around 30-40 minutes to complete all trials. 
                A few final notes: First, since you are playing with another player, you may see this screen before the game begins:
                <p>
                    <center><img src="images/waiting_view.png" alt="watiting screen" style="width:400px;height:250px">
                    </center>
                </p>
                <!-- Just hold tight. Another player should join the game within the next
                few minutes. If you're in the waiting room for more than 5 minutes without
                another player joining, please return the HIT and try again later! -->
                <!-- Otherwise, once your partner joins, you will be notified and need to
                click a button to start the game. -->
            </p>

            <p>
                Second, to make sure your work is properly recognized, we ask that you be respectful of your partner and the rules of the game. 
                If you are the <b>Architect</b>, try to provide instructions that are informative and concise. 
                If you are the <b>Builder</b>, please try your best to follow your partner's instructions as accurately as possible so you can both earn the highest possible bonus.

            </p>

            <p>
                Third, please DO NOT refresh the page at any point once you start
                the game (including the waiting page). If you refresh, you will not
                be able to rejoin the game you were in and you may not be able to
                submit the HIT. <br> Thank you!
                
            </p>

            <p>
                Please fill out this short quiz below before getting started. Good luck and have fun!
            </p>




        </div>
        <div class="page-header">
            <h3>Comprehension Quiz</h3>
        </div>

        <div class="well" style="width:800px; margin: 0 auto">

            </br>
            The Architect is the only one who can send instructions.
            </br>
            <input type="radio" name="sendMessage" value="yes"> True
            </br>
            <input type="radio" name="sendMessage" value="no"> False
            </br>

            </br>
            Each trial ends when 10 blocks are placed.
            </br>
            <input type="radio" name="endRound" value="no"> True
            </br>
            <input type="radio" name="endRound" value="yes"> False
            </br>

            </br>
            The Builder is the only one who can place dominoes.
            </br>
            <input type="radio" name="placeBlocks" value="yes"> True
            </br>
            <input type="radio" name="placeBlocks" value="no"> False
            </br>


            </br>
            If the Builder is uncertain, they can end their turn without placing a block.
            </br>
            <input type="radio" name="placeZero" value="yes"> True
            </br>
            <input type="radio" name="placeZero" value="no"> False
            </br>

            </br>
            It is possible to earn a partial bonus even if your recreation is not perfect.
            </br>
            <input type="radio" name="partialCredit" value="yes"> True
            </br>
            <input type="radio" name="partialCredit" value="no"> False
            </br>

            </br>
            The Architect is allowed to send multiple sets of instructions whenever it is their turn.
            </br>
            <input type="radio" name="allInfo" value="no"> True
            </br>
            <input type="radio" name="allInfo" value="yes"> False
            </br>



            </br>
            <input id="quiz_submit" type="submit" value="Submit">
            </br>
            </br>
            <div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
        </div> <!-- /container -->
    </div>
    <script type="text/javascript">
        $('html,body').scrollTop(0);
        var urlParams;
        var match,
            pl = /\+/g,  // Regex for replacing addition symbol with a space
            search = /([^&=]+)=?([^&]*)/g,
            decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
            query = location.search.substring(1);

        urlParams = {};
        while (match = search.exec(query))
            urlParams[decode(match[1])] = decode(match[2]);

        console.log(urlParams)

        var counter = 0;
        document.getElementById("quiz_submit").onclick = function () {
            var ans1 = $('input[name="sendMessage"]:checked').val();
            var ans2 = $('input[name="placeBlocks"]:checked').val();
            var ans3 = $('input[name="placeZero"]:checked').val();
            var ans4 = $('input[name="partialCredit"]:checked').val();
            var ans5 = $('input[name="allInfo"]:checked').val();
            var ans6 = $('input[name="endRound"]:checked').val();
            // var ans7 = $('input[name="incorrect"]:checked').val();

            if (ans1 == "yes" && ans2 == "yes" && ans3 == "yes" &&
                ans4 == "yes" && ans5 == "yes" && ans6 == "yes") {
                var workerId = urlParams.workerId;
                var assignmentId = urlParams.assignmentId;
                var hitId = urlParams.hitId;
                var turkSubmitTo = urlParams.turkSubmitTo;
                location.replace("./pass.html?workerId=" + workerId
                    + "&assignmentId=" + assignmentId
                    + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
            } else if (counter == 2) {
                location.replace("./fail.html");
            } else {
                $('.error').show()
                counter += 1;
            }
        };
    </script>

    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <!-- <script src="../lib/js/bootstrap.min.js"></script> -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
</body>

</html>
